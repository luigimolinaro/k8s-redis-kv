apiVersion: v1
kind: Pod
spec:
  containers:
  - name: frontend
    image: ubuntu:20.04
    command: ["/bin/sh"]
    args: ["-c", "
    apt update
    apt install -y wget
    ENV GOPATH=/usr/src/.go
    wget -qO- https://golang.org/dl/go1.15.6.linux-amd64.tar.gz | tar -C /usr/local -xzf -
    mkdir -p "${GOPATH}"
    ENV PATH='${PATH}:/usr/local/go/bin:${GOPATH}/bin'
    ENV GO111MODULE=on
    go get github.com/julienschmidt/httprouter
    go get github.com/garyburd/redigo/redis
    cd /opt/go-rest/
    go build
    /opt/go-rest/go-rest
    "]
  restartPolicy: OnFailure
